@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
<section class="hero-home text-center">
    <div class="hero-content">
        <h1 class="display-5 fw-bold text-success mb-3">Nền tảng giao dịch xe &amp; pin điện đã qua sử dụng</h1>
        <p class="lead text-muted mb-4">
            Kết nối người mua và người bán thông minh, minh bạch và an toàn. Khởi đầu hành trình xanh của bạn ngay hôm nay.
        </p>
        <div class="hero-actions d-flex justify-content-center gap-3 flex-wrap">
            <a class="btn btn-primary" asp-page="/VehicleListings/Upsert">Đăng tin xe</a>
            <a class="btn btn-outline-primary" asp-page="/BatteryListings/Upsert">Đăng tin pin</a>
        </div>
    </div>
</section>

<section class="features py-5">
    <div class="row g-4">
        @* <div class="col-md-4">
            <div class="feature-card">
                <span class="feature-icon">🔍</span>
                <h3>Bộ lọc thông minh</h3>
                <p>Tìm kiếm theo hãng, dung lượng pin, giá bán, tình trạng nhanh chóng.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-card">
                <span class="feature-icon">🛡️</span>
                <h3>Kiểm duyệt bảo đảm</h3>
                <p>Mọi tin đăng đều được staff phê duyệt trước khi hiển thị công khai.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-card">
                <span class="feature-icon">🤝</span>
                <h3>Kết nối nhanh chóng</h3>
                <p>Thông tin người bán rõ ràng để bạn liên hệ ngay khi tìm được món phù hợp.</p>
            </div>
        </div> *@
    </div>
</section>

<section class="market-section">
    <div class="market-section__header">
        <div>
            <h2 class="market-section__title">Tin xe điện đã duyệt</h2>
            <p class="text-muted mb-0 small">Các tin đang hiển thị công khai cho khách hàng.</p>
        </div>
        <div class="d-flex align-items-center gap-3">
            <span class="market-section__count">@Model.TotalVehicleCount tin</span>
            <a class="btn btn-outline-primary" asp-page="/VehicleListings/Browse">
                <i class="bi bi-arrow-right"></i> Xem tất cả
            </a>
        </div>
    </div>

    @if (Model.ApprovedVehicles.Any())
    {
        <div class="market-grid">
            @foreach (var vehicle in Model.ApprovedVehicles)
            {
                <article class="market-card">
                    <div class="market-card__media">
                        @if (!string.IsNullOrWhiteSpace(vehicle.ImageUrl))
                        {
                            <img src="@vehicle.ImageUrl" alt="Ảnh xe @vehicle.Brand @vehicle.Model" />
                        }
                        else
                        {
                            <div class="market-card__media--placeholder">Không ảnh</div>
                        }
                    </div>
                    <div class="market-card__body">
                        <h3 class="market-card__title">@vehicle.Brand @vehicle.Model</h3>
                        <div class="market-card__price">@vehicle.Price.ToString("N0") đ</div>
                        <dl class="market-card__meta">
                            <div>
                                <dt>Người đăng</dt>
                                <dd>@(string.IsNullOrWhiteSpace(vehicle.SellerName) ? "Không rõ" : vehicle.SellerName)</dd>
                            </div>
                            <div>
                                <dt>Năm</dt>
                                <dd>@(vehicle.Year?.ToString() ?? "—")</dd>
                            </div>
                            <div>
                                <dt>Dung lượng pin</dt>
                                <dd>@(string.IsNullOrWhiteSpace(vehicle.BatteryCapacity) ? "—" : vehicle.BatteryCapacity)</dd>
                            </div>
                            <div>
                                <dt>Tình trạng</dt>
                                <dd>@vehicle.Condition</dd>
                            </div>
                        </dl>
                    </div>
                    <div class="market-card__footer">
                        <a class="btn btn-chip btn-chip-neutral" 
                           asp-page="/VehicleListings/Details" 
                           asp-route-id="@vehicle.VehicleId"
                           asp-route-returnUrl="/">Xem chi tiết</a>
                    </div>
                </article>
            }
        </div>
    }
    else
    {
        <div class="market-empty">Chưa có tin xe nào được duyệt.</div>
    }
</section>

<section class="market-section">
    <div class="market-section__header">
        <div>
            <h2 class="market-section__title">Tin pin đã duyệt</h2>
            <p class="text-muted mb-0 small">Các nguồn pin khả dụng để bạn liên hệ nhanh.</p>
        </div>
        <div class="d-flex align-items-center gap-3">
            <span class="market-section__count">@Model.TotalBatteryCount tin</span>
            <a class="btn btn-outline-primary" asp-page="/BatteryListings/Browse">
                <i class="bi bi-arrow-right"></i> Xem tất cả
            </a>
        </div>
    </div>

    @if (Model.ApprovedBatteries.Any())
    {
        <div class="market-grid">
            @foreach (var battery in Model.ApprovedBatteries)
            {
                <article class="market-card">
                    <div class="market-card__media">
                        @if (!string.IsNullOrWhiteSpace(battery.ImageUrl))
                        {
                            <img src="@battery.ImageUrl" alt="Ảnh pin @battery.Brand @battery.BatteryType" />
                        }
                        else
                        {
                            <div class="market-card__media--placeholder">Không ảnh</div>
                        }
                    </div>
                    <div class="market-card__body">
                        <h3 class="market-card__title">@battery.Brand @battery.BatteryType</h3>
                        <div class="market-card__price">@battery.Price.ToString("N0") đ</div>
                        <dl class="market-card__meta">
                            <div>
                                <dt>Người đăng</dt>
                                <dd>@(string.IsNullOrWhiteSpace(battery.SellerName) ? "Không rõ" : battery.SellerName)</dd>
                            </div>
                            <div>
                                <dt>Dung lượng</dt>
                                <dd>@battery.Capacity</dd>
                            </div>
                            <div>
                                <dt>Điện áp</dt>
                                <dd>@(string.IsNullOrWhiteSpace(battery.Voltage) ? "—" : battery.Voltage)</dd>
                            </div>
                            <div>
                                <dt>Tình trạng</dt>
                                <dd>@battery.Condition</dd>
                            </div>
                        </dl>
                    </div>
                    <div class="market-card__footer">
                        <a class="btn btn-chip btn-chip-neutral" 
                           asp-page="/BatteryListings/Details" 
                           asp-route-id="@battery.BatteryId"
                           asp-route-returnUrl="/">Xem chi tiết</a>
                    </div>
                </article>
            }
        </div>
    }
    else
    {
        <div class="market-empty">Chưa có tin pin nào được duyệt.</div>
    }
</section>
